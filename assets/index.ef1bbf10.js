import{C as f,a as w,b as c,I as l,r as d,c as u,d as y,e as h,w as g,n as _,t as v,f as C,o as p,g as D}from"./vendor.934db77d.js";const b=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function a(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(e){if(e.ep)return;e.ep=!0;const s=a(e);fetch(e.href,s)}};b();var k=(t,r)=>{const a=t.__vccOpts||t;for(const[o,e]of r)a[o]=e;return a};const L={name:"App",components:{CalendarView:f,CalendarViewHeader:w},data(){return{title:"Calendar",showDate:this.thisMonth(1),message:"",items:[{id:"e0",startDate:"2021-01-14",endDate:"2021-01-20",title:"Multi-day item with a long title and times"}]}},computed:{userLocale(){return c.getDefaultBrowserLocale},dayNames(){return c.getFormattedWeekdayNames(this.userLocale,"long",0)},themeClasses(){return{"theme-default":!0}}},mounted(){const t=new URLSearchParams(window.location.search),r=t.get("ics")||prompt("Please enter a URL to your ICS/ICAL file");this.title=t.get("title")||prompt("Please enter a Title for your calendar"),window.document.title=this.title;const a=`?title=${this.title}&ics=${r}`;window.location.search!=a&&(window.location.search=a),this.tryFetch(r).then(o=>{const e=new l.Component(l.parse(o));this.items=Array.from(e.getAllSubcomponents("vevent"),(s,n)=>{var i=new l.Event(s);return{id:"event"+n,startDate:i.startDate.toString(),endDate:i.endDate.toString(),title:i.summary}})})},methods:{thisMonth(t,r,a){const o=new Date;return new Date(o.getFullYear(),o.getMonth(),t,r||0,a||0)},setShowDate(t){this.showDate=t},onClickItem(t){this.message=t.title},async fetch(t){const r=await fetch(t);if(!r.ok)throw r.status;return await r.text()},async thingproxy(t){return await this.fetch("https://thingproxy.freeboard.io/fetch/"+t)},async allorigins(t){return await this.fetch("https://api.allorigins.win/raw?url="+t)},async tryFetch(t){const r=[this.thingproxy,this.allorigins];for(const a of r)try{return await a(t)}catch(o){console.log(o)}}}},I={id:"app"},A={class:"calendar-parent"},N={key:0,class:"notification is-success"};function S(t,r,a,o,e,s){const n=d("calendar-view-header"),i=d("calendar-view");return p(),u("div",I,[y("div",A,[h(i,{items:e.items,"show-date":e.showDate,"time-format-options":{hour:"numeric",minute:"2-digit"},"enable-drag-drop":!1,"disable-past":!1,"disable-future":!1,"show-times":!1,"display-period-uom":"month","display-period-count":1,"starting-day-of-week":1,class:_(s.themeClasses),"current-period-label":e.title,displayWeekNumbers:!0,"enable-date-selection":!0,onClickItem:s.onClickItem},{header:g(({headerProps:m})=>[h(n,{slot:"header","header-props":m,onInput:s.setShowDate},null,8,["header-props","onInput"])]),_:1},8,["items","show-date","class","current-period-label","onClickItem"])]),e.message?(p(),u("div",N,v(e.message),1)):C("",!0)])}var x=k(L,[["render",S]]);D(x).mount("#app");
